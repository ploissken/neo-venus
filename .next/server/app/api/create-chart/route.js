(()=>{var t={};t.id=353,t.ids=[353],t.modules={633:(t,e,r)=>{"use strict";r.r(e),r.d(e,{patchFetch:()=>x,routeModule:()=>D,serverHooks:()=>O,workAsyncStorage:()=>M,workUnitAsyncStorage:()=>S});var n={};r.r(n),r.d(n,{POST:()=>y});var i=r(6559),s=r(8088),a=r(7719);let u=t=>{let e=t.sort((t,e)=>t.renderLongitude-e.renderLongitude),r=[],n=[];for(let t=0;t<e.length;t++){let i=e[t],s=e[t-1];0===n.length||s&&10>=Math.abs(i.renderLongitude-s.renderLongitude)?n.push(i):(r.push(n),n=[i])}n.length>0&&r.push(n);let i=[];return r.forEach(t=>{let e=t.reduce((t,e)=>t+e.renderLongitude,0)/t.length;t.forEach((r,n)=>{r.renderLongitude=e+(n-Math.floor(t.length/2))*8,i.push(r)})}),i.sort((t,e)=>t.planetIndex-e.planetIndex)},o=(t,e=0)=>u(t.map(({planet_id:t,sign_id:r,longitude:n,degrees:i,minutes:s,seconds:a})=>({planetIndex:t,signIndex:r,longitude:n,renderLongitude:-(n+e),renderMarker:-(n+e),degrees:i,minutes:s,seconds:a}))),c=t=>t.map(({house:e,start_degree:r,sign_id:n,degrees:i,minutes:s,seconds:a})=>({houseIndex:e,longitude:r,renderLongitude:r-t[0].start_degree+180,signIndex:n,degrees:i,minutes:s,seconds:a})),f=t=>t.map(({aspect_id:t,direction:e,dms:r,planet_a_id:n,planet_b_id:i,value:s})=>({direction:e,dms:r,planetA:n,planetB:i,value:s,aspectIndex:t}));var h=r(2190),d=r(9406),l=r.n(d),$=r(5075),m=r.n($),p=r(5230),v=r.n(p);l().extend(m()),l().extend(v());let g=async(t,e)=>{let r="http://api.timezonedb.com/v2.1/get-time-zone?key=API_KEY&format=json&by=position&lat=LATITUDE&lng=LONGITUDE".replace("API_KEY",process.env.TZDB_API_KEY||"").replace("LATITUDE",t).replace("LONGITUDE",e),n=await fetch(r);return await n.json()};async function y(t){let e=await t.json(),{latitude:r,longitude:n,referenceDate:i}=e,{zoneName:s}=await g(`${r}`,`${n}`),a=l().tz(i,s).toISOString(),u=await fetch("http://localhost:8000/chart",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,referenceDate:a})});if(!u.ok)throw Error("Failed to fetch chart data");let{planets:d,houses:$,metadata:m,aspects:p}=await u.json(),v=c($),y=o(d,v[0].longitude),D=f(p);return h.NextResponse.json({aspects:D,metadata:m,planets:y,houses:v,asc:v[0]})}let D=new i.AppRouteRouteModule({definition:{kind:s.RouteKind.APP_ROUTE,page:"/api/create-chart/route",pathname:"/api/create-chart",filename:"route",bundlePath:"app/api/create-chart/route"},resolvedPagePath:"/home/node/src/app/api/create-chart/route.ts",nextConfigOutput:"",userland:n}),{workAsyncStorage:M,workUnitAsyncStorage:S,serverHooks:O}=D;function x(){return(0,a.patchFetch)({workAsyncStorage:M,workUnitAsyncStorage:S})}},846:t=>{"use strict";t.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},3033:t=>{"use strict";t.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:t=>{"use strict";t.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},4870:t=>{"use strict";t.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},5075:function(t){var e,r,n;e="minute",r=/[+-]\d\d(?::?\d\d)?/g,n=/([+-]|\d\d)/g,t.exports=function(t,i,s){var a=i.prototype;s.utc=function(t){var e={date:t,utc:!0,args:arguments};return new i(e)},a.utc=function(t){var r=s(this.toDate(),{locale:this.$L,utc:!0});return t?r.add(this.utcOffset(),e):r},a.local=function(){return s(this.toDate(),{locale:this.$L,utc:!1})};var u=a.parse;a.parse=function(t){t.utc&&(this.$u=!0),this.$utils().u(t.$offset)||(this.$offset=t.$offset),u.call(this,t)};var o=a.init;a.init=function(){if(this.$u){var t=this.$d;this.$y=t.getUTCFullYear(),this.$M=t.getUTCMonth(),this.$D=t.getUTCDate(),this.$W=t.getUTCDay(),this.$H=t.getUTCHours(),this.$m=t.getUTCMinutes(),this.$s=t.getUTCSeconds(),this.$ms=t.getUTCMilliseconds()}else o.call(this)};var c=a.utcOffset;a.utcOffset=function(t,i){var s=this.$utils().u;if(s(t))return this.$u?0:s(this.$offset)?c.call(this):this.$offset;if("string"==typeof t&&null===(t=function(t){void 0===t&&(t="");var e=t.match(r);if(!e)return null;var i=(""+e[0]).match(n)||["-",0,0],s=i[0],a=60*+i[1]+ +i[2];return 0===a?0:"+"===s?a:-a}(t)))return this;var a=16>=Math.abs(t)?60*t:t,u=this;if(i)return u.$offset=a,u.$u=0===t,u;if(0!==t){var o=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(u=this.local().add(a+o,e)).$offset=a,u.$x.$localOffset=o}else u=this.utc();return u};var f=a.format;a.format=function(t){var e=t||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return f.call(this,e)},a.valueOf=function(){var t=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*t},a.isUTC=function(){return!!this.$u},a.toISOString=function(){return this.toDate().toISOString()},a.toString=function(){return this.toDate().toUTCString()};var h=a.toDate;a.toDate=function(t){return"s"===t&&this.$offset?s(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():h.call(this)};var d=a.diff;a.diff=function(t,e,r){if(t&&this.$u===t.$u)return d.call(this,t,e,r);var n=this.local(),i=s(t).local();return d.call(n,i,e,r)}}},5230:function(t){var e,r;e={year:0,month:1,day:2,hour:3,minute:4,second:5},r={},t.exports=function(t,n,i){var s,a=function(t,e,n){void 0===n&&(n={});var i,s,a,u,o=new Date(t);return(void 0===(i=n)&&(i={}),(u=r[a=e+"|"+(s=i.timeZoneName||"short")])||(u=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:s}),r[a]=u),u).formatToParts(o)},u=function(t,r){for(var n=a(t,r),s=[],u=0;u<n.length;u+=1){var o=n[u],c=o.type,f=o.value,h=e[c];h>=0&&(s[h]=parseInt(f,10))}var d=s[3],l=s[0]+"-"+s[1]+"-"+s[2]+" "+(24===d?0:d)+":"+s[4]+":"+s[5]+":000",$=+t;return(i.utc(l).valueOf()-($-=$%1e3))/6e4},o=n.prototype;o.tz=function(t,e){void 0===t&&(t=s);var r,n=this.utcOffset(),a=this.toDate(),u=a.toLocaleString("en-US",{timeZone:t}),o=Math.round((a-new Date(u))/1e3/60),c=-(15*Math.round(a.getTimezoneOffset()/15))-o;if(Number(c)){if(r=i(u,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(c,!0),e){var f=r.utcOffset();r=r.add(n-f,"minute")}}else r=this.utcOffset(0,e);return r.$x.$timezone=t,r},o.offsetName=function(t){var e=this.$x.$timezone||i.tz.guess(),r=a(this.valueOf(),e,{timeZoneName:t}).find(function(t){return"timezonename"===t.type.toLowerCase()});return r&&r.value};var c=o.startOf;o.startOf=function(t,e){if(!this.$x||!this.$x.$timezone)return c.call(this,t,e);var r=i(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return c.call(r,t,e).tz(this.$x.$timezone,!0)},i.tz=function(t,e,r){var n=r&&e,a=r||e||s,o=u(+i(),a);if("string"!=typeof t)return i(t).tz(a);var c=function(t,e,r){var n=t-60*e*1e3,i=u(n,r);if(e===i)return[n,e];var s=u(n-=60*(i-e)*1e3,r);return i===s?[n,i]:[t-60*Math.min(i,s)*1e3,Math.max(i,s)]}(i.utc(t,n).valueOf(),o,a),f=c[0],h=c[1],d=i(f).utcOffset(h);return d.$x.$timezone=a,d},i.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},i.tz.setDefault=function(t){s=t}}},6487:()=>{},8335:()=>{},9294:t=>{"use strict";t.exports=require("next/dist/server/app-render/work-async-storage.external.js")},9406:function(t){var e,r,n,i,s,a,u,o,c,f,h,d,l,$,m,p,v,g,y,D,M,S;e="millisecond",r="second",n="minute",i="hour",s="week",a="month",u="quarter",o="year",c="date",f="Invalid Date",h=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,d=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,l=function(t,e,r){var n=String(t);return!n||n.length>=e?t:""+Array(e+1-n.length).join(r)+t},(m={})[$="en"]={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(t){var e=["th","st","nd","rd"],r=t%100;return"["+t+(e[(r-20)%10]||e[r]||"th")+"]"}},p="$isDayjsObject",v=function(t){return t instanceof M||!(!t||!t[p])},g=function t(e,r,n){var i;if(!e)return $;if("string"==typeof e){var s=e.toLowerCase();m[s]&&(i=s),r&&(m[s]=r,i=s);var a=e.split("-");if(!i&&a.length>1)return t(a[0])}else{var u=e.name;m[u]=e,i=u}return!n&&i&&($=i),i||!n&&$},y=function(t,e){if(v(t))return t.clone();var r="object"==typeof e?e:{};return r.date=t,r.args=arguments,new M(r)},(D={s:l,z:function(t){var e=-t.utcOffset(),r=Math.abs(e);return(e<=0?"+":"-")+l(Math.floor(r/60),2,"0")+":"+l(r%60,2,"0")},m:function t(e,r){if(e.date()<r.date())return-t(r,e);var n=12*(r.year()-e.year())+(r.month()-e.month()),i=e.clone().add(n,a),s=r-i<0,u=e.clone().add(n+(s?-1:1),a);return+(-(n+(r-i)/(s?i-u:u-i))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return({M:a,y:o,w:s,d:"day",D:c,h:i,m:n,s:r,ms:e,Q:u})[t]||String(t||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}}).l=g,D.i=v,D.w=function(t,e){return y(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})},S=(M=function(){function t(t){this.$L=g(t.locale,null,!0),this.parse(t),this.$x=this.$x||t.x||{},this[p]=!0}var l=t.prototype;return l.parse=function(t){this.$d=function(t){var e=t.date,r=t.utc;if(null===e)return new Date(NaN);if(D.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var n=e.match(h);if(n){var i=n[2]-1||0,s=(n[7]||"0").substring(0,3);return r?new Date(Date.UTC(n[1],i,n[3]||1,n[4]||0,n[5]||0,n[6]||0,s)):new Date(n[1],i,n[3]||1,n[4]||0,n[5]||0,n[6]||0,s)}}return new Date(e)}(t),this.init()},l.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},l.$utils=function(){return D},l.isValid=function(){return this.$d.toString()!==f},l.isSame=function(t,e){var r=y(t);return this.startOf(e)<=r&&r<=this.endOf(e)},l.isAfter=function(t,e){return y(t)<this.startOf(e)},l.isBefore=function(t,e){return this.endOf(e)<y(t)},l.$g=function(t,e,r){return D.u(t)?this[e]:this.set(r,t)},l.unix=function(){return Math.floor(this.valueOf()/1e3)},l.valueOf=function(){return this.$d.getTime()},l.startOf=function(t,e){var u=this,f=!!D.u(e)||e,h=D.p(t),d=function(t,e){var r=D.w(u.$u?Date.UTC(u.$y,e,t):new Date(u.$y,e,t),u);return f?r:r.endOf("day")},l=function(t,e){return D.w(u.toDate()[t].apply(u.toDate("s"),(f?[0,0,0,0]:[23,59,59,999]).slice(e)),u)},$=this.$W,m=this.$M,p=this.$D,v="set"+(this.$u?"UTC":"");switch(h){case o:return f?d(1,0):d(31,11);case a:return f?d(1,m):d(0,m+1);case s:var g=this.$locale().weekStart||0,y=($<g?$+7:$)-g;return d(f?p-y:p+(6-y),m);case"day":case c:return l(v+"Hours",0);case i:return l(v+"Minutes",1);case n:return l(v+"Seconds",2);case r:return l(v+"Milliseconds",3);default:return this.clone()}},l.endOf=function(t){return this.startOf(t,!1)},l.$set=function(t,s){var u,f=D.p(t),h="set"+(this.$u?"UTC":""),d=((u={}).day=h+"Date",u[c]=h+"Date",u[a]=h+"Month",u[o]=h+"FullYear",u[i]=h+"Hours",u[n]=h+"Minutes",u[r]=h+"Seconds",u[e]=h+"Milliseconds",u)[f],l="day"===f?this.$D+(s-this.$W):s;if(f===a||f===o){var $=this.clone().set(c,1);$.$d[d](l),$.init(),this.$d=$.set(c,Math.min(this.$D,$.daysInMonth())).$d}else d&&this.$d[d](l);return this.init(),this},l.set=function(t,e){return this.clone().$set(t,e)},l.get=function(t){return this[D.p(t)]()},l.add=function(t,e){var u,c=this;t=Number(t);var f=D.p(e),h=function(e){var r=y(c);return D.w(r.date(r.date()+Math.round(e*t)),c)};if(f===a)return this.set(a,this.$M+t);if(f===o)return this.set(o,this.$y+t);if("day"===f)return h(1);if(f===s)return h(7);var d=((u={})[n]=6e4,u[i]=36e5,u[r]=1e3,u)[f]||1,l=this.$d.getTime()+t*d;return D.w(l,this)},l.subtract=function(t,e){return this.add(-1*t,e)},l.format=function(t){var e=this,r=this.$locale();if(!this.isValid())return r.invalidDate||f;var n=t||"YYYY-MM-DDTHH:mm:ssZ",i=D.z(this),s=this.$H,a=this.$m,u=this.$M,o=r.weekdays,c=r.months,h=r.meridiem,l=function(t,r,i,s){return t&&(t[r]||t(e,n))||i[r].slice(0,s)},$=function(t){return D.s(s%12||12,t,"0")},m=h||function(t,e,r){var n=t<12?"AM":"PM";return r?n.toLowerCase():n};return n.replace(d,function(t,n){return n||function(t){switch(t){case"YY":return String(e.$y).slice(-2);case"YYYY":return D.s(e.$y,4,"0");case"M":return u+1;case"MM":return D.s(u+1,2,"0");case"MMM":return l(r.monthsShort,u,c,3);case"MMMM":return l(c,u);case"D":return e.$D;case"DD":return D.s(e.$D,2,"0");case"d":return String(e.$W);case"dd":return l(r.weekdaysMin,e.$W,o,2);case"ddd":return l(r.weekdaysShort,e.$W,o,3);case"dddd":return o[e.$W];case"H":return String(s);case"HH":return D.s(s,2,"0");case"h":return $(1);case"hh":return $(2);case"a":return m(s,a,!0);case"A":return m(s,a,!1);case"m":return String(a);case"mm":return D.s(a,2,"0");case"s":return String(e.$s);case"ss":return D.s(e.$s,2,"0");case"SSS":return D.s(e.$ms,3,"0");case"Z":return i}return null}(t)||i.replace(":","")})},l.utcOffset=function(){return-(15*Math.round(this.$d.getTimezoneOffset()/15))},l.diff=function(t,e,c){var f,h=this,d=D.p(e),l=y(t),$=(l.utcOffset()-this.utcOffset())*6e4,m=this-l,p=function(){return D.m(h,l)};switch(d){case o:f=p()/12;break;case a:f=p();break;case u:f=p()/3;break;case s:f=(m-$)/6048e5;break;case"day":f=(m-$)/864e5;break;case i:f=m/36e5;break;case n:f=m/6e4;break;case r:f=m/1e3;break;default:f=m}return c?f:D.a(f)},l.daysInMonth=function(){return this.endOf(a).$D},l.$locale=function(){return m[this.$L]},l.locale=function(t,e){if(!t)return this.$L;var r=this.clone(),n=g(t,e,!0);return n&&(r.$L=n),r},l.clone=function(){return D.w(this.$d,this)},l.toDate=function(){return new Date(this.valueOf())},l.toJSON=function(){return this.isValid()?this.toISOString():null},l.toISOString=function(){return this.$d.toISOString()},l.toString=function(){return this.$d.toUTCString()},t}()).prototype,y.prototype=S,[["$ms",e],["$s",r],["$m",n],["$H",i],["$W","day"],["$M",a],["$y",o],["$D",c]].forEach(function(t){S[t[1]]=function(e){return this.$g(e,t[0],t[1])}}),y.extend=function(t,e){return t.$i||(t(e,M,y),t.$i=!0),y},y.locale=g,y.isDayjs=v,y.unix=function(t){return y(1e3*t)},y.en=m[$],y.Ls=m,y.p={},t.exports=y}};var e=require("../../../webpack-runtime.js");e.C(t);var r=t=>e(e.s=t),n=e.X(0,[447,580],()=>r(633));module.exports=n})();